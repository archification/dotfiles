#!/bin/env sh

if ! [ -x "$(command -v jq)" ]; then
    echo 'Error: jq is not installed.' >&2
    exit 1
fi

if ! [ -x "$(command -v curl)" ]; then
    echo 'Error: curl is not installed.' >&2
    exit 1
fi

if [ -z "$1" ]
then
    echo "No argument supplied"
    exit 1
fi

json=$(curl -sX POST https://hastebin.com/documents -d "$(cat $1)")
key=$(echo $json | jq '.key' | sed -e 's/^"//' -e 's/"$//')

echo "https://hastebin.com/$key"
